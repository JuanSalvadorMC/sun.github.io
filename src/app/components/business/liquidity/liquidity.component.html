<div class="main-container">
    <p>Ingresa los datos de registro requeridos de tu empresa o negocio en la página SUN para ser contactado por uno de nuestros socios inversionistas con interés de otorgarte financiamiento o liquidez a tu empresa o negocio;
        no olvides ingresar el porcentaje de utilidad que ofrecerás a tu nuevo socio por inyección de Capital, ya que esto atraerá al socio perfecto que necesitas.
    </p>
</div>

<form [formGroup]="formLiquid">
    <div class="main-container">
        <div class="form-row">
            <div class="form-group col-md-4">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Nombre del Negocio*</mat-label>
                    <input matInput placeholder="Nombre de tu negocio" formControlName="nombre">
                </mat-form-field>
            </div>
            <div class="form-group col-md-4">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Tipo de Negocio*</mat-label>
                    <mat-select formControlName="tipoNegocio">
                        <mat-option [value] ="tipoNegocio.tipoNegocio" *ngFor="let tipoNegocio of catTipoNegocio">{{tipoNegocio.tipoNegocio}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <!-- <mat-label>Tipo del Negocio*</mat-label>
        <input matInput placeholder="Nombre de tu negocio" formControlName="tipoNegocio"> -->
            </div>
            <div class="form-group col-md-4">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Tipo de Socio*</mat-label>
                    <mat-select formControlName="tipoSocio">
                        <mat-option [value] ="tipoSocio.tipoSocio" *ngFor="let tipoSocio of catTipoSocio">{{tipoSocio.tipoSocio}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-4">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Monto de Inversión Requerida*</mat-label>
                    <input matInput placeholder="$ 100,000.00" formControlName="monto" moneda [OnlyNumber]="true">
                </mat-form-field>
            </div>
            <div class="form-group col-md-4">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Venta Mensual Esperada*</mat-label>
                    <input matInput placeholder="$ 10,000.00" formControlName="ventaMensualEsperada" moneda [OnlyNumber]="true">
                </mat-form-field>
            </div>
            <div class="form-group col-md-4">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Gastos de Operación Mensual*</mat-label>
                    <input matInput placeholder="$ 5,000.00" formControlName="gastosOperacionMensual" moneda [OnlyNumber]="true">
                </mat-form-field>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
               <!--  <p>Ingrese el porcentaje de utilidad que 
                    ofrece a su nuevo socio por la inyecciones de capital.</p> -->
              <!--   <mat-form-field  appearance="outline" class="example-full-width"> -->
               <div class="m-0 p-0 cont ">
                <mat-label class="etiquetax">Porcentaje de Utilidad Ofrecida:</mat-label>
                <!--  <input matInput #input maxlength="3" placeholder="%" formControlName="porcentaje" [OnlyNumber]="true"> -->
                <mat-slider color='primary'
                class="example-margin sliderx"
                [disabled]="disabled"
                [max]="max"
                [min]="min"
                [thumbLabel]="thumbLabel"
                [(ngModel)]="value"
                formControlName="porcentaje"
                >
               
            </mat-slider>
        <p class="por " >{{value}}%</p>
               </div>
             
           <!--     <p>{{value}}%</p> -->
                
              <!--   </mat-form-field>  -->

  
               
                     
                 
                  
         
            </div>
            <div class="form-group col-md-6">
                <mat-form-field  appearance="outline" class="example-full-width">
                    <mat-label>Calle*</mat-label>
                    <input matInput #input maxlength="100"   placeholder="Calle" formControlName="ubicacion">
                    <mat-error>Ingresa mínimo 3 caracteres</mat-error>
                </mat-form-field>
            </div>

            <div class="form-group col-md-6">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Estado*</mat-label>
                    <mat-select formControlName="estado" (selectionChange)="obtenerMunicipios()">
                        <mat-option [value]="estado.nombreEstado" *ngFor="let estado of catEstados">{{estado.nombreEstado}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="form-group col-md-6">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Municipio*</mat-label>
                    <mat-select formControlName="municipio">
                        <mat-option [value]="municipio.nombreMunicipio" *ngFor="let municipio of catMunicipios">{{municipio.nombreMunicipio}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

        </div>
        <div class="form-group">
            <mat-form-field  appearance="outline" class="example-full-width">
                <mat-label>Descripcion de tu Negocio*</mat-label>
                <textarea matInput #input maxlength="300" placeholder="Describe detalladamente" formControlName="descripcion"></textarea>
                <mat-error>Ingresa mínimo 5 caracteres</mat-error>
            </mat-form-field>
        </div>
        <div class="form-group">
            <mat-form-field appearance="outline" class="example-full-width">
                <mat-label>¿Quiénes y cuántos son tus principales competidores?*</mat-label>
                <textarea matInput #input maxlength="200" placeholder="Describe detalladamente" formControlName="competidores"></textarea>
                <mat-error>Ingresa mínimo 5 caracteres</mat-error>
            </mat-form-field>
        </div>
        <div class="w-100 mb-4" *ngIf="!esConsulta">
            <div class="form-group">
                <!-- <label for="file" class="labels">Selecciona tu nueva imagen:</label> -->
                <input #fileInput name="files[]" style="display: none;" type="file" (change)="onFileSelected($event)" accept="application/jpeg">
                <button mat-raised-button type="button" class="btn-upload" (click)="fileInput.click()">
                    Subir imagen
                    <mat-icon class="ml-2">cloud_upload</mat-icon>
                </button>
            </div>
        </div>
    </div>

    <div class="table-container" *ngIf="imagesArray.length > 0">
        <table class="table table-bordered table-hover text-center">
            <thead>
                <tr>
                    <th scope="col">Acción</th>
                    <th scope="col">Imagen</th>
                    <th scope="col">Nombre</th>
                </tr>
            </thead>
            <tbody formArrayName="imagenes" *ngFor="let item of formLiquid['controls'].imagenes['controls']; let i=index;">
                <tr [formGroupName]="i">
                    <td>
                        <button mat-icon-button color="warn" (click)="deleteImage(i)" class="btn-eliminar"  *ngIf="!esConsulta">
                            <mat-icon>add_circle</mat-icon>
                        </button>

                        <ng-container >
                            <input #fileInputReemplazr name="files[]" style="display: none;" type="file" (change)="onFileSelectedReemplazar(item.value, $event)" accept="application/jpeg">
                            <button mat-raised-button color="primary" (click)="fileInputReemplazr.click()" class="btn-reemplazar" *ngIf="esConsulta">
                                Reemplazar
                            </button>
                        </ng-container>
                    </td>
                    <td *ngIf="item?.value?.nuevaImagen"><img [src]="'data:'+item?.value?.type+';base64,'+item?.value?.imgBase" class="img-fluid"></td>
                    <td *ngIf="!item?.value?.nuevaImagen"><img [src]="item?.value?.imgBase" class="img-fluid"></td>
                    <td>{{ item?.value?.name }}</td>
                </tr>
            </tbody>
        </table>

    </div>

    <div class="text-lg-right">
        <button mat-stroked-button class="btn btn-danger mr-2" (click)="dialogRef.close()" >Cerrar</button>
        <button mat-stroked-button class="btn-colorRe mb-3" *ngIf='this.esConsulta==false' (click)="publicar()" [disabled]="formLiquid.invalid">Publicar</button>
        <button mat-stroked-button class="btn-colorRe mb-3" *ngIf='this.esConsulta' (click)="actualizarImg()" [disabled]="formLiquid.invalid">Actualizar</button>
    </div>
</form>

<!-- daaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa -->


